---
page_title: "awsenvsecretlayer Provider"
subcategory: ""
description: |- 
  The awsenvsecretlayer provider allows you to manage AWS Lambda Layers with environment variables and secrets from AWS Secrets Manager.
  
---

# AWS Lambda Environment Secret Layer Provider

This Terraform provider offers a custom resource for managing AWS Lambda environment secret layers. It allows you to create and update Lambda layers with environment variables and secrets from AWS Secrets Manager. The layer is created with a **.env** file containing the environment variables and secrets, which can then be used by your Lambda functions.

## Features
- Creates a Lambda layer with environment variables and secrets.
- Supports updating the Lambda layer when changes are detected in environment variables or secrets.
- Allows controlling the deletion of the Lambda layer during the update process with the **skip_destroy** parameter.

## Example Usage

##### **`./envs/vars.yaml`**
```
var1: "example-1"
var2: "example-2"
var3: "example-3"
```

##### **`main.tf`**
```
terraform {
  required_providers {
    awsenvsecretlayer = {
      source = "saltydogtechnology/awsenvsecretlayer"
      version = "0.0.3"
    }
  }
}

provider "awsenvsecretlayer" {
  region  = "us-east-1"
  profile = "aws-profile-name"
}

locals {
  yaml_data = yamldecode(file("${path.module}/envs/vars.yaml"))
}

resource "awsenvsecretlayer_lambda" "example" {
  layer_name          = "example-layer"
  file_name           = "example.env"
  yaml_config         = jsonencode(local.yaml_data)
  secrets_arns        = [
    "arn:aws:secretsmanager:us-east-1:111111111111:secret:example1/env-1/123",
    "arn:aws:secretsmanager:us-east-1:222222222222:secret:example2/secret/1233"
  ]
  envs_map = {
    "ENV_VAR_FROM_MAP_1" = "value_1"
    "ENV_VAR_FROM_MAP_2" = "value_2"
    "ENV_VAR_FROM_MAP_3" = "value_3"
  }
  compatible_runtimes = ["nodejs14.x", "python3.8"]
  skip_destroy        = false
  license_files       = ["${path.module}/envs/LICENSE.txt"]
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Optional

- `profile` (String) - The profile name as set in the shared credentials file for the provider.
- `region` (String) - The AWS region where the resources will be managed.
